# Figma Personal Access Token è¨­å®šæŒ‡å—

## æ¦‚è¿°

æœ¬æŒ‡å—å°‡å”åŠ©æ‚¨å»ºç«‹å’Œè¨­å®š Figma Personal Access Token (PAT)ï¼Œä»¥ä¾¿åœ¨é–‹ç™¼æµç¨‹ä¸­æ•´åˆ Figma è¨­è¨ˆè³‡æºã€‚

## ç›®éŒ„

- [ç‚ºä»€éº¼éœ€è¦ Personal Access Token](#ç‚ºä»€éº¼éœ€è¦-personal-access-token)
- [å»ºç«‹ Personal Access Token](#å»ºç«‹-personal-access-token)
- [è¨­å®šç’°å¢ƒè®Šæ•¸](#è¨­å®šç’°å¢ƒè®Šæ•¸)
- [é©—è­‰è¨­å®š](#é©—è­‰è¨­å®š)
- [å®‰å…¨æ€§æœ€ä½³å¯¦è¸](#å®‰å…¨æ€§æœ€ä½³å¯¦è¸)
- [å¸¸è¦‹å•é¡Œ](#å¸¸è¦‹å•é¡Œ)

---

## ç‚ºä»€éº¼éœ€è¦ Personal Access Token

Figma Personal Access Token å…è¨±æ‚¨çš„æ‡‰ç”¨ç¨‹å¼é€é Figma API å­˜å–è¨­è¨ˆæª”æ¡ˆï¼Œå¯¦ç¾ï¼š

- ğŸ“¥ è‡ªå‹•åŒ¯å‡ºè¨­è¨ˆè³‡ç”¢ï¼ˆåœ–ç¤ºã€å½±åƒï¼‰
- ğŸ¨ è®€å–è¨­è¨ˆè¦ç¯„ï¼ˆé¡è‰²ã€å­—å‹ã€é–“è·ï¼‰
- ğŸ”„ åŒæ­¥è¨­è¨ˆè®Šæ›´åˆ°ç¨‹å¼ç¢¼
- ğŸ“Š æ•´åˆè¨­è¨ˆèˆ‡é–‹ç™¼å·¥ä½œæµç¨‹

---

## å»ºç«‹ Personal Access Token

### æ­¥é©Ÿ 1: ç™»å…¥ Figma

1. å‰å¾€ [Figma å®˜ç¶²](https://www.figma.com/)
2. ä½¿ç”¨æ‚¨çš„å¸³è™Ÿç™»å…¥

### æ­¥é©Ÿ 2: é€²å…¥å¸³è™Ÿè¨­å®š

1. é»æ“Šå³ä¸Šè§’çš„å€‹äººé ­åƒ
2. é¸æ“‡ **Settings**ï¼ˆè¨­å®šï¼‰

### æ­¥é©Ÿ 3: å»ºç«‹æ–°çš„ Token

1. åœ¨å·¦å´é¸å–®ä¸­ï¼Œé»æ“Š **Account**ï¼ˆå¸³è™Ÿï¼‰æ¨™ç±¤
2. å‘ä¸‹æ²å‹•æ‰¾åˆ° **Personal access tokens** å€å¡Š
3. é»æ“Š **Generate new token**ï¼ˆç”¢ç”Ÿæ–°ä»¤ç‰Œï¼‰æŒ‰éˆ•

### æ­¥é©Ÿ 4: è¨­å®š Token è³‡è¨Š

1. **Token åç¨±**: è¼¸å…¥æœ‰æ„ç¾©çš„åç¨±ï¼ˆä¾‹å¦‚ï¼š`Counter Flutter Demo - Development`ï¼‰
2. **Token æè¿°**ï¼ˆé¸å¡«ï¼‰: èªªæ˜æ­¤ token çš„ç”¨é€”
3. **Expiration**ï¼ˆåˆ°æœŸæ—¥ï¼‰: å»ºè­°é¸æ“‡åˆç†çš„åˆ°æœŸæ™‚é–“
   - é–‹ç™¼ç’°å¢ƒï¼š30-90 å¤©
   - æŒçºŒæ•´åˆï¼šå¯é¸æ“‡è¼ƒé•·æœŸé™ï¼Œä½†å®šæœŸæ›´æ–°
4. **Scopes**ï¼ˆæ¬Šé™ç¯„åœï¼‰: é¸æ“‡å¿…è¦çš„æ¬Šé™
   - âœ… **File content** - è®€å–æª”æ¡ˆå…§å®¹ï¼ˆå¿…è¦ï¼‰
   - âœ… **Read-only** - å”¯è®€å­˜å–ï¼ˆå»ºè­°ï¼Œè¼ƒå®‰å…¨ï¼‰

### æ­¥é©Ÿ 5: ç”¢ç”Ÿä¸¦è¤‡è£½ Token

1. é»æ“Š **Generate token**ï¼ˆç”¢ç”Ÿä»¤ç‰Œï¼‰æŒ‰éˆ•
2. **é‡è¦**: Token åªæœƒé¡¯ç¤ºä¸€æ¬¡ï¼Œè«‹ç«‹å³è¤‡è£½ä¸¦å®‰å…¨ä¿å­˜
3. Token æ ¼å¼ç¯„ä¾‹ï¼š`figd_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX`

âš ï¸ **è­¦å‘Š**: æ­¤ Token ç­‰åŒæ–¼æ‚¨çš„å¯†ç¢¼ï¼Œè«‹å‹¿åˆ†äº«æˆ–æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»çµ±ï¼

---

## è¨­å®šç’°å¢ƒè®Šæ•¸

### æ–¹æ³• 1: ä½¿ç”¨ .env æª”æ¡ˆï¼ˆæ¨è–¦ï¼‰

1. åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„å»ºç«‹ `.env` æª”æ¡ˆï¼š

```bash
# åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„åŸ·è¡Œ
touch .env
```

2. ç·¨è¼¯ `.env` æª”æ¡ˆï¼ŒåŠ å…¥ä»¥ä¸‹å…§å®¹ï¼š

```properties
# Figma API è¨­å®š
FIGMA_ACCESS_TOKEN=your_personal_access_token_here
FIGMA_FILE_KEY=your_figma_file_key_here
```

3. ç¢ºä¿ `.env` å·²åŠ å…¥ `.gitignore`ï¼š

```bash
# æª¢æŸ¥ .gitignore
cat .gitignore | grep .env

# å¦‚æœæ²’æœ‰ï¼ŒåŠ å…¥ä»¥ä¸‹è¡Œ
echo ".env" >> .gitignore
```

### æ–¹æ³• 2: ç³»çµ±ç’°å¢ƒè®Šæ•¸

#### macOS / Linux

ç·¨è¼¯ `~/.zshrc` æˆ– `~/.bashrc`ï¼š

```bash
export FIGMA_ACCESS_TOKEN="your_personal_access_token_here"
export FIGMA_FILE_KEY="your_figma_file_key_here"
```

é‡æ–°è¼‰å…¥è¨­å®šï¼š

```bash
source ~/.zshrc  # æˆ– source ~/.bashrc
```

#### Windows

ä½¿ç”¨ PowerShellï¼š

```powershell
[System.Environment]::SetEnvironmentVariable('FIGMA_ACCESS_TOKEN', 'your_token_here', 'User')
[System.Environment]::SetEnvironmentVariable('FIGMA_FILE_KEY', 'your_file_key_here', 'User')
```

### å–å¾— Figma File Key

Figma File Key å¯å¾è¨­è¨ˆæª”æ¡ˆ URL ä¸­å–å¾—ï¼š

```
https://www.figma.com/file/{FILE_KEY}/File-Name
                              ^^^^^^^^
                              é€™å°±æ˜¯ File Key
```

ç¯„ä¾‹ï¼š
- URL: `https://www.figma.com/file/abc123xyz789/My-Design`
- File Key: `abc123xyz789`

---

## é©—è­‰è¨­å®š

### ä½¿ç”¨ cURL æ¸¬è©¦

```bash
# æ¸¬è©¦ API é€£ç·š
curl -H "X-Figma-Token: YOUR_TOKEN" \
     "https://api.figma.com/v1/files/YOUR_FILE_KEY"
```

æˆåŠŸå›æ‡‰æ‡‰åŒ…å«æª”æ¡ˆè³‡è¨Šçš„ JSON è³‡æ–™ã€‚

### ä½¿ç”¨ Flutter/Dart æ¸¬è©¦

å»ºç«‹æ¸¬è©¦è…³æœ¬ `test_figma_connection.dart`ï¼š

```dart
import 'dart:io';
import 'package:http/http.dart' as http;
import 'dart:convert';

Future<void> main() async {
  final token = Platform.environment['FIGMA_ACCESS_TOKEN'];
  final fileKey = Platform.environment['FIGMA_FILE_KEY'];

  if (token == null || fileKey == null) {
    print('âŒ ç’°å¢ƒè®Šæ•¸æœªè¨­å®š');
    print('è«‹è¨­å®š FIGMA_ACCESS_TOKEN å’Œ FIGMA_FILE_KEY');
    exit(1);
  }

  print('ğŸ” æ­£åœ¨æ¸¬è©¦ Figma API é€£ç·š...');
  print('File Key: $fileKey');

  final url = Uri.parse('https://api.figma.com/v1/files/$fileKey');
  final response = await http.get(
    url,
    headers: {'X-Figma-Token': token},
  );

  if (response.statusCode == 200) {
    final data = json.decode(response.body);
    print('âœ… é€£ç·šæˆåŠŸï¼');
    print('æª”æ¡ˆåç¨±: ${data['name']}');
    print('æœ€å¾Œä¿®æ”¹: ${data['lastModified']}');
  } else {
    print('âŒ é€£ç·šå¤±æ•—');
    print('ç‹€æ…‹ç¢¼: ${response.statusCode}');
    print('éŒ¯èª¤è¨Šæ¯: ${response.body}');
  }
}
```

åŸ·è¡Œæ¸¬è©¦ï¼š

```bash
# å®‰è£ http å¥—ä»¶ï¼ˆå¦‚æœå°šæœªå®‰è£ï¼‰
flutter pub add http

# åŸ·è¡Œæ¸¬è©¦
dart run test_figma_connection.dart
```

---

## å®‰å…¨æ€§æœ€ä½³å¯¦è¸

### âœ… å‹™å¿…éµå®ˆ

1. **æ°¸ä¸æäº¤ Token åˆ° Git**
   ```bash
   # æª¢æŸ¥æ˜¯å¦ä¸å°å¿ƒæäº¤
   git log -p | grep -i "figma"
   
   # å¦‚æœç™¼ç¾ï¼Œç«‹å³æ’¤éŠ·ä¸¦é‡æ–°ç”¢ç”Ÿ token
   ```

2. **ä½¿ç”¨ .env æª”æ¡ˆä¸¦åŠ å…¥ .gitignore**
   ```gitignore
   # .gitignore
   .env
   .env.local
   .env.*.local
   ```

3. **å®šæœŸè¼ªæ› Token**
   - å»ºè­°æ¯ 90 å¤©æ›´æ–°ä¸€æ¬¡
   - å¦‚æœ‰å®‰å…¨ç–‘æ…®ï¼Œç«‹å³é‡æ–°ç”¢ç”Ÿ

4. **æœ€å°æ¬Šé™åŸå‰‡**
   - åªæˆäºˆå¿…è¦çš„æ¬Šé™ï¼ˆé€šå¸¸åªéœ€ read-onlyï¼‰
   - é¿å…æˆäºˆå¯«å…¥æ¬Šé™ï¼Œé™¤éçµ•å°å¿…è¦

5. **åœ˜éšŠå”ä½œ**
   - æ¯ä½é–‹ç™¼è€…ä½¿ç”¨è‡ªå·±çš„ Token
   - ä¸è¦å…±ç”¨ Token
   - åœ¨åœ˜éšŠæ–‡ä»¶ä¸­èªªæ˜å¦‚ä½•å»ºç«‹å€‹äºº Token

### ğŸ”’ ç’°å¢ƒéš”é›¢

ç‚ºä¸åŒç’°å¢ƒä½¿ç”¨ä¸åŒçš„ Tokenï¼š

```properties
# .env.development
FIGMA_ACCESS_TOKEN=dev_token_here

# .env.production
FIGMA_ACCESS_TOKEN=prod_token_here
```

### ğŸš¨ Token æ´©æ¼è™•ç†

å¦‚æœ Token ä¸æ…æ´©æ¼ï¼š

1. **ç«‹å³æ’¤éŠ·** Tokenï¼ˆåœ¨ Figma è¨­å®šé é¢ï¼‰
2. **ç”¢ç”Ÿæ–°çš„** Token
3. **æ›´æ–°æ‰€æœ‰** ä½¿ç”¨è©² Token çš„ç’°å¢ƒ
4. **æª¢æŸ¥ Git æ­·å²**ï¼Œç¢ºèªæ˜¯å¦éœ€è¦æ¸…é™¤æ­·å²è¨˜éŒ„
5. **é€šçŸ¥åœ˜éšŠ** å®‰å…¨äº‹ä»¶

---

## å¸¸è¦‹å•é¡Œ

### Q1: Token é¡¯ç¤ºã€Œç„¡æ•ˆã€æˆ–ã€Œå·²éæœŸã€

**A**: æª¢æŸ¥ä»¥ä¸‹é …ç›®ï¼š
- Token æ˜¯å¦æ­£ç¢ºè¤‡è£½ï¼ˆåŒ…å«å®Œæ•´çš„ `figd_` å‰ç¶´ï¼‰
- Token æ˜¯å¦å·²éæœŸ
- Figma å¸³è™Ÿæ˜¯å¦ä»æœ‰æ•ˆ
- ç¶²è·¯é€£ç·šæ˜¯å¦æ­£å¸¸

**è§£æ±ºæ–¹æ¡ˆ**: é‡æ–°ç”¢ç”Ÿæ–°çš„ Token

### Q2: API å›æ‡‰ 403 Forbidden

**A**: å¯èƒ½åŸå› ï¼š
- Token æ¬Šé™ä¸è¶³
- æª”æ¡ˆæœªåˆ†äº«çµ¦æ‚¨çš„å¸³è™Ÿ
- æª”æ¡ˆå·²åˆªé™¤æˆ–ç§»å‹•

**è§£æ±ºæ–¹æ¡ˆ**:
1. ç¢ºèªæ‚¨æœ‰æª”æ¡ˆçš„å­˜å–æ¬Šé™
2. æª¢æŸ¥ Token çš„ scopes è¨­å®š
3. ç¢ºèª File Key æ­£ç¢º

### Q3: å¦‚ä½•åœ¨ CI/CD ä¸­ä½¿ç”¨ Token

**A**: ä½¿ç”¨ç’°å¢ƒè®Šæ•¸æˆ– Secret ç®¡ç†å·¥å…·ï¼š

**GitHub Actions**:
```yaml
env:
  FIGMA_ACCESS_TOKEN: ${{ secrets.FIGMA_ACCESS_TOKEN }}
```

åœ¨ GitHub Repository Settings â†’ Secrets ä¸­æ–°å¢ `FIGMA_ACCESS_TOKEN`ã€‚

**GitLab CI**:
```yaml
variables:
  FIGMA_ACCESS_TOKEN: $FIGMA_ACCESS_TOKEN
```

åœ¨ GitLab Project Settings â†’ CI/CD â†’ Variables ä¸­æ–°å¢ã€‚

### Q4: Token å¯ä»¥è¨­å®šç‚ºæ°¸ä¸éæœŸå—ï¼Ÿ

**A**: ä¸å»ºè­°ã€‚åŸºæ–¼å®‰å…¨è€ƒé‡ï¼š
- é¸æ“‡åˆç†çš„éæœŸæ™‚é–“ï¼ˆ30-90 å¤©ï¼‰
- è¨­å®šè¡Œäº‹æ›†æé†’å®šæœŸæ›´æ–°
- å»ºç«‹æ¨™æº–ä½œæ¥­ç¨‹åºï¼ˆSOPï¼‰ç°¡åŒ–æ›´æ–°æµç¨‹

### Q5: å¤šå€‹å°ˆæ¡ˆå¯ä»¥å…±ç”¨åŒä¸€å€‹ Token å—ï¼Ÿ

**A**: æŠ€è¡“ä¸Šå¯ä»¥ï¼Œä½†ä¸å»ºè­°ï¼š
- æ¯å€‹å°ˆæ¡ˆä½¿ç”¨ç¨ç«‹çš„ Token
- ä¾¿æ–¼ç®¡ç†å’Œæ’¤éŠ·
- æé«˜å®‰å…¨æ€§ï¼ˆToken æ´©æ¼å½±éŸ¿ç¯„åœè¼ƒå°ï¼‰

---

## ç›¸é—œè³‡æº

### å®˜æ–¹æ–‡ä»¶
- [Figma API æ–‡ä»¶](https://www.figma.com/developers/api)
- [Personal Access Tokens èªªæ˜](https://help.figma.com/hc/en-us/articles/8085703771159-Manage-personal-access-tokens)

### å¯¦ç”¨å·¥å…·
- [Figma API Explorer](https://www.figma.com/developers/api#api-explorer) - äº’å‹•å¼ API æ¸¬è©¦å·¥å…·
- [Figma Plugins](https://www.figma.com/community/plugins) - ç¤¾ç¾¤é–‹ç™¼çš„æ“´å……åŠŸèƒ½

### Flutter æ•´åˆå¥—ä»¶
- [figma_api](https://pub.dev/packages/figma_api) - Dart Figma API å®¢æˆ¶ç«¯
- [figma_to_flutter](https://pub.dev/packages/figma_to_flutter) - è¨­è¨ˆè½‰ç¨‹å¼ç¢¼å·¥å…·

---

## æ”¯æ´

å¦‚æœ‰å•é¡Œæˆ–éœ€è¦å”åŠ©ï¼š

1. æŸ¥é–±æœ¬å°ˆæ¡ˆçš„ [README.md](../README.md)
2. åƒè€ƒå°ˆæ¡ˆæ†²ç«  [.specify/memory/constitution.md](../.specify/memory/constitution.md)
3. è¯çµ¡åœ˜éšŠæŠ€è¡“è² è²¬äºº

---

**æœ€å¾Œæ›´æ–°**: 2025-11-21  
**æ–‡ä»¶ç‰ˆæœ¬**: 1.0.0  
**ç¶­è­·è€…**: å°ˆæ¡ˆåœ˜éšŠ

---

> ğŸ“ **æ³¨æ„**: æœ¬æ–‡ä»¶éµå¾ªå°ˆæ¡ˆæ†²ç« åŸå‰‡ V - æ–‡ä»¶èªè¨€è¦ç¯„ï¼Œä½¿ç”¨ç¹é«”ä¸­æ–‡æ’°å¯«ã€‚
